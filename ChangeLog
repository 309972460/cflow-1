2005-04-22  Sergey Poznyakoff  <gray@Mirddin.farlep.net>

	* Makefile.am (SUBDIRS): Add po/
	* configure.ac (AC_CONFIG_FILES): Add po/Makefile.in.
	* build-aux/bootstrap: Take into account autopoint
	* build-aux/gnulib.modules (gettext): New module
	* src/Makefile.am (AM_CPPFLAGS): New variable

	* src/c.l: Add gettext markers
	* src/cflow.h: Likewise
	* src/main.c: Likewise
	* src/output.c: Likewise
	* src/parser.c: Likewise
	* src/rc.c: Likewise
	* src/symbol.c: Likewise

	* .cvsignore: New file
	* po/.cvsignore: New file
	* build-aux/.cvsignore: Updated
	* po/Makevars: New file
	* po/POTFILES.in: New file
	
2005-04-22  Sergey Poznyakoff  <gray@Mirddin.farlep.net>

	cflow dubbed a GNU package and moved to savannah.
	
	* README-alpha (Checking Out the Sources): Updated the
	instructions.
	* README: Minor fix.
	* configure.ac: Changed bug report address.

2005-03-22  Sergey Poznyakoff  <gray@Mirddin.farlep.net>

	* lib/argcv.c: Imported from mailutils
	* lib/argcv.h: Imported from mailutils
	* lib/Makefile.tmpl: Added argcv
	* src/cflow.rc: New file
	* src/Makefile.am: Distribute cflow.rc
	(chart.cflow): New rule
	* src/c.l (CFLOW_PREPROC): Moved to cflow.h
	(set_preprocessor): Accept NULL arg
	* src/cflow.h (CFLOW_PREPROC): New define
	(set_preprocessor,pp_option,print_level): New prototypes
	(level_mark): Type changed to unsigned char.
	* src/main.c (ignore_indentation): Renamed to use_indentation,
	sense reverted. All callers updated
	New options: --cpp, alias to --preprocess.
	--no-cpp, disables preprocessing
	* src/output.c (level_mark): Type changed to unsigned char.
	
	* src/rc.c: Rewritten using argcv
	* src/parser.c (ignore_indentation): Renamed to use_indentation,
	sense reverted. All callers updated

2005-03-22  Sergey Poznyakoff  <gray@Noldor.runasimi.org>

	* TODO: Updated
	* src/c.l (canonical_filename): New global
	(update_loc): New function
	(source): Invoke preprocessor if necessary
	(yywrap): Stop preprocessor if necessary
	* src/cflow.h (struct symbol.temp): New field
	* src/gnu.c (gnu_output_handler): Do not print extra newlines
	as separators
	* src/main.c: New options -I, -U, -D and --preprocess
	(main): Use ARGP_IN_ORDER when parsing arguments
	* src/parser.c (dcl): Minor fix to allow for nameless
	function-pointer arguments [int foo(int (*)())]
	* src/parser.h (canonical_filename): New global
	* src/symbol.c (install): Initialize sym->temp
 	(delete_statics): Unconditionally remove temporary symbols

2005-03-21  Sergey Poznyakoff  <gray@Mirddin.farlep.net>

	* elisp/cflow-mode.el: Font locking support

2005-03-21  Sergey Poznyakoff  <gray@Noldor.runasimi.org>

	* README: Updated
	* elisp/cflow.el: Renamed to
	* elisp/cflow-mode.el: ... this and improved
	* src/c.l: Fixed line counting in <string> state
	* src/cflow.h (print_line_numbers): New variable
	* src/gnu.c (print_level): Moved to output.c
	(print_function_name): Do not output newline in cflow_output_text
	* src/main.c: Reordered functions
	(find_option_type): Take third argument.
	(symbol_override,number,parse_level_string)
	(set_level_indent): Operate on read-only strings
	(options): New option --number (-n)
	* src/output.c (print_level): Moved from gnu.c
	(print_text): New function
	(header): Removed
	(is_printable,is_last): New functions
	(direct_tree,inverted_tree): Fixed printing tree branches in
	-T mode.
	(tree_output): Do not print headers.
	* src/parser.c (declare): Changed error message.
	* src/posix.c (print_symbol): Call print_level();
	(posix_output_handler) Do not output newline in cflow_output_text

2005-03-20  Sergey Poznyakoff  <gray@Noldor.runasimi.org>

	* src/cflow.h (GNU_STYLE_OPTIONS,SYSTEM_ERROR)
	(FATAL_ERROR): Removed
	(SymFunction): Renamed to SymIdentifier. All callers updated
	(struct symbol): Removed union, rearranged fields. All callers
	updated
	Implemented -ix
	
	* src/c.l: Likewise
	* src/gnu.c: Likewise
	* src/main.c: Likewise
	* src/output.c: Likewise
	* src/parser.c: Likewise
	* src/posix.c: Likewise
	* src/symbol.c: Likewise
	
	* TODO: Updated

2005-03-20  Sergey Poznyakoff  <gray@Noldor.runasimi.org>

	* doc/Makefile.am: Updated
	* doc/cflow.texi: Documentation framework
	* doc/fdl.texi: GNU FDL
	* doc/rendition.texi: Rendition macros
	* doc/gendocs_template: Template for index.html
	* doc/.cvsignore: Updated

2005-03-19  Sergey Poznyakoff  <gray@Noldor.runasimi.org>

	* .cvsignore: Updated
	* COPYING: Added to the repository
	* TODO: Updated
	* src/Makefile.am (AM_LEXFLAGS): Use AM_LFLAGS instead. Also,
	removed -pl
	* src/c.l: Requires POSIX-compliant lex (e.g. flex).
	(WS): Ignore \f and \r
	(init_lex): Set lexer debugging level
	(DIGITS): Require at least one digit
	* src/cflow.h (record_typedefs,globals_only): Removed
	(max_depth): New variable
	(source,yyparse,cleanup,output,init_lex,init_parse)
	(delete_autos,delete_statics,globals_only,include_symbol): New
	prototypes
	(register_output): Changed type of the second argument
	(gnu_output_handler,posix_output_handler): Return int
	* src/gnu.c (print_symbol,gnu_output_handler): Return int
	* src/main.c: Implemented POSIX options (except -i x)
	(options): Reordered. Removed -C, -t (in favor of -i t), and
	-g (in favor of -i ^s). --brief option takes an optional
	argument (enable/disable)
	(progname): Removed
	(globals_only,include_symbol): New functions
	* src/output.c (output_driver.handler,print_symbol): Return int
	(register_output): Changed type of the second argument
	(is_var): Rewritten using include_symbol()
	(direct_tree,inverted_tree): Do not descend any further if
	print_symbol returns non-0.
	Do not process the symbol if the current nesting level exceeds
	maximum (set up by -d option).
	(tree_output): Print either direct or inverted graph, not both
	* src/parser.c: Stylistic changes
	* src/parser.h (yylex): Prototype
	* src/posix.c: Produce inverted graph. Honor --brief option
	* src/rc.c: Include ctype.h
	(expand_args): Removed unused variable
	* src/symbol.c (hash_symbol_hasher,hash_symbol_compare): Minor
	fixes
	(delete_statics): globals_only is now a function
	
2005-03-19  Sergey Poznyakoff  <gray@Noldor.runasimi.org>

	* README-alpha: New file
	* lib: New directory
	* lib/Makefile.tmpl: New file
	* lib/.cvsignore: New file
	* Makefile.am (SUBDIRS): Add lib
	* NEWS: Updated
	* configure.ac: Raised version number to 0.2.1
	Call cflow_GNULIB to check for missing sources
	Call MU_DEBUG_MODE to enable debugging mode
	* .cvsignore: Updated
	* src/Makefile.am (INCLUDES,cflow_LDADD): Added

	* build-aux: New directory
	* build-aux/.cvsignore: New file
	* build-aux/bootstrap: New file
	* build-aux/debug.m4: New file
	* build-aux/gnulib.modules: New file

	* src/cflow.h: Include error.h and xalloc.h
	(emalloc,efree): Removed. Use xmalloc instead
	(error): Removed. Use gnulib version
	* src/main.c: Use argp to parse arguments.
	(temp_symbol_stack,say_and_die): Removed
	(emalloc,efree,error): Removed
	(xalloc_die): New function
	(init): Updated
	(symbol_override): Install symbols immediately
	* src/symbol.c: Rewritten using hash module

	* src/c.l: Fixed indentation
	* src/gnu.c: Likewise
	* src/output.c: Likewise
	* src/parser.c: Likewise
	* src/rc.c: Likewise
	
2005-03-19  Sergey Poznyakoff  <gray@Noldor.runasimi.org>

	* AUTHORS: New file
	* NEWS: New file
	* THANKS: New file
	* Makefile.am: New file
	* configure.ac: New file
	* elisp: New directory
	* doc/Makefile.am: New file
	* src/Makefile.am: New file
	* src/Makefile: Removed
	* src/posix.c: New file
	* src/gnu.c: New file

	* TODO: Updated
	* src/cflow.h: Updated
	* src/obstack1.h: Removed
	* src/output.h: Removed
	* src/hilit-cflow.el: Removed
	* src/collect.c: Removed
	* src/html.c: Removed
	* src/text.c: Removed
	* src/cflow.el: Moved to /elisp
	* src/main.c: New option -f (--format)
	* src/c.l: Updated
	* src/output.c: Likewise
	* src/parser.c: Likewise
	* src/rc.c: Likewise
	* src/symbol.c: Likewise
	* src/version.h: Likewise
	
	* elisp/cflow.el: Moved from /src
	* elisp/Makefile.am: New file

	* src/.cvsignore: New file
	* doc/.cvsignore: New file
	* elisp/.cvsignore: New file
	* .cvsignore: New file
	
2005-03-16  Sergey Poznyakoff  <gray@Mirddin.farlep.net>

	Initial import from my RCS archives. First revisions date
	back to 1997. The plan is to convert this to a POSIX-compatible
	cflow utility.
	

Local Variables:
mode: change-log
version-control: never
End:
